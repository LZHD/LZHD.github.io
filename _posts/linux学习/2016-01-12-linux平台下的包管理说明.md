---
layout : life
title : linux下包管理说明
category : linux学习
duoshuo : true
date : 2016-01-12
---


******

**主要的包管理家族**

|包管理系统|发行版(部分列表)|
|:------:|:------:|
|Debian Style(.deb)|Debian, Ubuntu, Xandros, Linspire|
|Red Hat Style(.rpm)|Fedora,CentOS,Red Hat Enterprise Linux, OpenSUSE, Mandriva, PCLinuxOS|

<!-- more -->

## 1.背景知识科普

### 1.1 linux 中软件安装方式

要么直接进行源码安装，要么用包管理工具对发行包进行安装，但是他们的共同之处在于:

* 都有配置文件,通过配置文件来改变程序的运行特征。
* 都拥有二进制的程序主体。
* 都自带库文件，供程序主体进行调用。
* 都带有帮助文件，对程序的使用方法进行说明。

### 1.2 软件的安装路径

在自行下载源码进行编译安装时，是可以指定自定义的安装路径的，在使用包管理器时，都是按照自身预设的安装路径进行安装.

* **软件包的一般安装路径**

|文件路径|路径用途说明|
|:------:|:------:|
|/|系统根目录,在此安装的文件通常是OS在运行时需要调用到的程序|
|/usr|此目录一般情况下是提供基本服务的软件|
|/usr/local|此目录下一般情况是用户自行安装的第三方软件|

* **系统相关的软件包的安装路径**

|文件路径|路径用途说明|
|:------:|:------:|
|/etc|配置文件路径|
|/bin 和 /sbin|二进制文件路径|
|/lib|库文件路径|

* **系统提供服务相关的包安装路进**

|文件路径|路径用途说明|
|:------:|:------:|
|/etc|配置文件的路径|
|/usr/bin 和 /usr/sbin|二进制文件路径|
|/usr/lib|库文件路径|

* **第三方软件包的安装路径**

|文件路径|路径用途说明|
|:------:|:------:|
|/usr/local/etc|配置文件路径|
|/usr/local/bin 和 /usr/local/sbin|二进制文件路径|
|/usr/local/lib|库文件路径|

* **特别说明:**

说明文件都要存放在 `/usr/share/man` 和 `/usr/local/share/man`

### 1.2 软件包的命名说明

一般的软件包的组成形如(拿rpm包说明)

> name-version-release.arch.rpm

```python
	# name: 表示包的名称，包括主包名和分包名
	# version: 表示包的版本信息
	# release: 用于标识包本身的发行号，可以同时包含适用的操作系统
	# arch: 表示机器平台，noarch表示此包能安装到所有平台上面
	# 
```

**例如:**

gd-devel-2.0.35-11.el6.x86_64.rpm

```python
	# gd: 包的主名字
	# devel: 包的分包名字
	# 2.0.35: 表示版本信息，2为主板本号，0表示次版本信息，35为源码包的发行号，也叫做修订号，
	# 11.el6: 11 是rpm的发行号，el6表示REHL6
	# x86_64: 表示适合的平台
```

## 2. 主流发行版的软件包管理速查表

|任务名称|Debian和Ubuntu等(apt系列)|openSUSE(zypp)|
|:------:|:------:|:------:|
|安装包|`apt-get install <pkg>`|`zypper install <pkg>`|
|卸载包|`apt-get remove <pkg>`|`zypper remove <pkg>`|`yum erase <pkg>`|`pacman -R <pkg>`|
|更新包列表|`apt-get update`|`zypper refresh`|
|更新系统所有包|`apt-get upgrade`|`zypper update`|
|更新指定安装包|`dkpg -i <pkg>`|`rpm -Uvh <pkg>`|
|列出源|`cat /etc/apt/sources.list`|`zypper repos`|
|添加源|`vim /etc/apt/sources.list`|`zypper addrepo <path>`|
|移除源|`vim /etc/apt/sources.list`|`zypper removerepo <name>`|
|搜索包|`apt-cache search <pkg>`|`zypper search <pkg>`|
|列出已安装的包|`dpkg -l`|`rpm -qa`|

|任务名称|Fedora,CentOS(yum)|Arch(pacman)|
|:------:|:------:|:------:|
|安装包|`yum install <pkg>`|`pacman -S <pkg>`|
|卸载包|`yum erase <pkg>`|`pacman -R <pkg>`|
|更新包列表|`yum check-update`|`pacman -Sy`|
|更新系统所有包|`yum update`|`pacman -Su`|
|更新系统指定包|`rpm -Uvh <pkg>`或者`yum update <pkg>`|`rpm -Uvh <pkg>`|
|列出源|`yum repolist`|`cat /etc/pacman.conf`|
|添加源|`add <repo> to /etc/yum.repos.d/`|`vim /etc/pacman.conf`|
|移除源|`remove <repo> from /etc/yum.repos.d`|`vim /etc/pacman.conf`|
|搜索包|`yum search <pkg>`|`pacman -Qs <pkg>`|
|列出已安装的包|`rmp -qs`|`pacman -Qii`|

## 3. RPM 包的基本操作

### 3.1 RPM 命令常用参数

```sh
	RPM 常规使用方式 rpm -? package.rpm ,其中 -? 为操作参数(更多信息，请查阅帮助 $man rpm)

	-q 在系统中查询软件或查询指定rpm包的内容信息
	-i 在系统中安装软件
	-U 在系统中升级软件
	-e 在系统卸载软件
	-h 用#(hash)符显示rpm安装过程
	-v 详述安装过程
	-p 表明对rpm包进行查询，通常和其他参数同时使用，如：
		-qlp 查询某个rpm包中的所有文件列表
		-qip 查询某个rpm包的内容信息
```

### 3.2 RPM 命令参数使用方法

* **安装RPM包**

```sh
	rpm -ivh package.rpm 
```

* **升级RPM包**

```sh
	rpm -Uvh package.rpm
```

* **卸载RPM包**

```sh
	rpm -ev package
```

* **查询RPM包中包含的文件列表命令**

```sh
	rpm -qlp package
```

* **查询RPM包瀚内容信息命令**

```sh
	rpm -qip package
```

* **查询系统中所有已安装RPM包**

```sh
	rpm -qa
```


## 4. DEB 包的基本操作

### 4.1 DPKG命令常用参数

```sh
	DPKG 的常规使用方法为 dpkg -? package.deb, 其中-? 为安装参数(更多信息，请查阅帮助$man dpkg)
	
	-l 在系统中查询软件内容信息
	--info 在系统中查询软件或查询指定rpm包的内容信息
	-i 在系统中安装/升级软件
	-r 在系统中卸载软件，不删除配置文件
	-P 在系统中卸载软件以及其配置文件
```

### 4.2 DPKG命令参数使用方法

* **安装DEB包**

```sh
	sudo dpkg -i package.deb
```

* **升级DEB包**

```sh
	sudo dpkg -i package.deb(和安装命令一样)
```

* **卸载DEB包**

```sh
	sudo dpkg -r package.deb # 不卸载配置文件
	或者
	sudo dpkg -P package.deb # 卸载配置文件
```

* **查询DEB包中包含的文件列表命令**

```sh
	sudo dpkg-deb -c package.deb
```

* **查询DEB包中包含的内容信息命令**

```sh
	sudo dpkg --info package.deb
```

* **查询系统中所有已安装DEB包**

```sh
	dpkg -l package
```
